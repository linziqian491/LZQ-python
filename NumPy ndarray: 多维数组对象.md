# 多维组对象

NumPy 是python数值计算中重要的基础包
    内容：
        基于数组的便捷算术操作和广播功能
        快速的矩阵计算
        数组数据读写工具
    重要性：
        内存量小，不需要写python循环

NumPy的核心特征之一就是 N-维数组对象---nadarray
ndarray是大型数据集容器。


```python
import numpy as np
data=np.random.randn(2,3)
print(data)
```

    [[-0.14722921 -0.40535567 -1.14540789]
     [ 0.47685815  0.85635394  0.34974015]]
    


```python
data*10
```




    array([[ -1.47229208,  -4.05355671, -11.45407894],
           [  4.76858152,   8.5635394 ,   3.49740147]])




```python
data+data
```




    array([[-0.29445842, -0.81071134, -2.29081579],
           [ 0.9537163 ,  1.71270788,  0.69948029]])



array函数接收任意的序列型对象，生成一个包含传递数据的NUMPY数组


```python
#列表的转换
data1 =[6,7.5,8,0,1]
arri= np.array(data1)
arri
```




    array([6. , 7.5, 8. , 0. , 1. ])




```python
#同等长度的列表，自动转换多维数组
data2=[[1,2,3,4],[5,6,7,8]]
arr2=np.array(data2)
arr2
```




    array([[1, 2, 3, 4],
           [5, 6, 7, 8]])



## ndarray的数据类型

dytpe是一个特殊的对象，包含nadaary 需要为某种数据所有声明的内存信息
astype转换数组的数据类型


```python
arr=np.array([1,2,3,4,5])
arr.dtype
```




    dtype('int32')




```python
float_arr=arr.astype(np.float64)
float_arr.dtype
```




    dtype('float64')



## NumPy数组算术

特征向量化：任何在两个等尺寸数组之间的算术操作都应用了逐元素操作的方式


```python
arr = np.array([[1.,2.,3.],[4.,5.,6.]])
arr
```




    array([[1., 2., 3.],
           [4., 5., 6.]])




```python
arr*arr
```




    array([[ 1.,  4.,  9.],
           [16., 25., 36.]])




```python
#同尺寸数组之间的比较，会产生一个布尔值数组
arr2= np.array([[0.,4.,1.],[7.,2.,12.]])
arr2
```




    array([[ 0.,  4.,  1.],
           [ 7.,  2., 12.]])




```python
arr2>arr
```




    array([[False,  True, False],
           [ True, False,  True]])



## 基础索引与切片

数组的切片是原数组的视图，数据是不会被被复制，任何对视图的修改都会反映原数组上


```python
import numpy as np
arr=np.arange(10)
arr
```




    array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])




```python
arr_slice=arr[5:8]
arr_slice
```




    array([12, 12, 12])




```python
arr_slice[:]=64
arr
```




    array([ 0,  1,  2,  3,  4, 64, 64, 64,  8,  9])



二维数组中，每个索引值对应的元素不是一个值而是一个数组
1 2 3
4 5 6
7 8 9


```python
arr2d=np.array([[1,2,3],[4,5,6],[7,8,9]])
arr2d[2]
```




    array([7, 8, 9])



多维数组中，返回的对象是降低一个维度的数组


```python
#2*2*3的数组[2,2,3]
import numpy as np
arr3d= np.array([[[1,2,3],[4,5,6]],[[7,8,9],[10,11,12]]])
arr3d
```




    array([[[ 1,  2,  3],
            [ 4,  5,  6]],
    
           [[ 7,  8,  9],
            [10, 11, 12]]])




```python
#arr3d【0】是一个2*3的数组
arr3d[0]
```




    array([[1, 2, 3],
           [4, 5, 6]])




```python
old_values = arr3d[0].copy()
arr3d[0]=24
arr3d
```




    array([[[24, 24, 24],
            [24, 24, 24]],
    
           [[ 7,  8,  9],
            [10, 11, 12]]])



##  数组的切片索引

对比一维数组与二位数组的切片


```python
arr
```




    array([ 0,  1,  2,  3,  4, 64, 64, 64,  8,  9])




```python
arr[1:6]
```




    array([ 1,  2,  3,  4, 64])




```python
arr2d
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
arr2d[:2]
```




    array([[1, 2, 3],
           [4, 5, 6]])



## 布尔索引


```python
names = np.array(['Bob','Joe','Will','Bob','will','Joe','Joe',])
data =np.random.randn(7,4)
names
```




    array(['Bob', 'Joe', 'Will', 'Bob', 'will', 'Joe', 'Joe'], dtype='<U4')




```python
data
#data数组中的一行相对每个人名
```




    array([[ 1.39691347,  0.59278744,  0.36199636,  0.68045862],
           [-1.06137673, -0.19211538, -0.58598033, -1.1920063 ],
           [-0.98380029, -0.76933254, -1.4732259 , -0.27130336],
           [-0.30804816,  0.08172924, -0.45191819,  0.99120165],
           [-1.13001301, -0.35917244, -0.39659064,  0.05091539],
           [ 0.18034163,  0.45313467, -0.0325277 ,  0.42620429],
           [ 0.15948637,  1.16022339,  0.19547969, -0.26908348]])




```python
names == 'Bob'
#布尔值数组的长度不正确，布尔值选择的数据方法并不会报错
```




    array([ True, False, False,  True, False, False, False])




```python
data[names == 'Bob']
```




    array([[ 1.39691347,  0.59278744,  0.36199636,  0.68045862],
           [-0.30804816,  0.08172924, -0.45191819,  0.99120165]])




```python
data[names=='Bob',2:]
```




    array([[ 0.36199636,  0.68045862],
           [-0.45191819,  0.99120165]])




```python
data[names=='Bob',3]
```




    array([0.68045862, 0.99120165])




```python
names !='Bob'
```




    array([False,  True,  True, False,  True,  True,  True])




```python
data[~(names=='Bob')]
```




    array([[-1.06137673, -0.19211538, -0.58598033, -1.1920063 ],
           [-0.98380029, -0.76933254, -1.4732259 , -0.27130336],
           [-1.13001301, -0.35917244, -0.39659064,  0.05091539],
           [ 0.18034163,  0.45313467, -0.0325277 ,  0.42620429],
           [ 0.15948637,  1.16022339,  0.19547969, -0.26908348]])



##  神奇索引


```python
#8*4的数组
arr = np.empty((8,4))
for i in range(8):
    arr[i]=i
arr
```




    array([[0., 0., 0., 0.],
           [1., 1., 1., 1.],
           [2., 2., 2., 2.],
           [3., 3., 3., 3.],
           [4., 4., 4., 4.],
           [5., 5., 5., 5.],
           [6., 6., 6., 6.],
           [7., 7., 7., 7.]])




```python
arr[[4,3,0,6]]
```




    array([[4., 4., 4., 4.],
           [3., 3., 3., 3.],
           [0., 0., 0., 0.],
           [6., 6., 6., 6.]])




```python
arr = np.arange(32).reshape((8,4))
arr
```




    array([[ 0,  1,  2,  3],
           [ 4,  5,  6,  7],
           [ 8,  9, 10, 11],
           [12, 13, 14, 15],
           [16, 17, 18, 19],
           [20, 21, 22, 23],
           [24, 25, 26, 27],
           [28, 29, 30, 31]])




```python
arr[[1,5,7,2],[0,3,1,2]]
```




    array([ 4, 23, 29, 10])



##  数组转置和转轴


```python
import numpy as np
arr = np.arange(15).reshape((3,5))
arr
```




    array([[ 0,  1,  2,  3,  4],
           [ 5,  6,  7,  8,  9],
           [10, 11, 12, 13, 14]])



数据拥有transpose方法，也有特殊的T属性


```python
arr.T
```




    array([[ 0,  5, 10],
           [ 1,  6, 11],
           [ 2,  7, 12],
           [ 3,  8, 13],
           [ 4,  9, 14]])



当计算矩阵内积会使用np.dot


```python
arr= np.random.randn(6,3)
arr
```




    array([[-0.72186929, -0.43908941,  2.74369476],
           [ 0.14909806, -1.58991387, -0.03903913],
           [ 0.8156254 ,  1.38866496,  1.13868401],
           [-0.33772372,  0.03588226, -0.02570554],
           [ 1.26469549, -0.10275925,  1.75100285],
           [-0.0135729 ,  0.64389825,  1.02945248]])




```python
np.dot(arr.T,arr)
```




    array([[ 2.92226651,  1.06172549,  1.15152406],
           [ 1.06172549,  5.07546795,  0.92060066],
           [ 1.15152406,  0.92060066, 12.9524304 ]])




```python
arr=np.arange(16).reshape((2,2,4))
arr
```




    array([[[ 0,  1,  2,  3],
            [ 4,  5,  6,  7]],
    
           [[ 8,  9, 10, 11],
            [12, 13, 14, 15]]])




```python
arr.swapaxes(1,2)
```




    array([[[ 0,  4],
            [ 1,  5],
            [ 2,  6],
            [ 3,  7]],
    
           [[ 8, 12],
            [ 9, 13],
            [10, 14],
            [11, 15]]])




```python

```
